---
title: Dark Mode
description: Set up dark mode with system preference detection and manual toggle.
---

MeldUI uses a class-based dark mode. Add the `dark` class to `<html>` to enable dark theme.

## How It Works

The MeldUI theme includes a `@custom-variant` for dark mode:

```css
@custom-variant dark (&:is(.dark *));
```

This enables `dark:` variants in Tailwind classes. All MeldUI components automatically respond to the `.dark` class.

## Basic Toggle

Toggle dark mode programmatically:

```typescript
document.documentElement.classList.toggle('dark')
```

## System Preference Detection

Detect and follow the user's OS preference:

```typescript
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)')

// Apply on load
if (prefersDark.matches) {
  document.documentElement.classList.add('dark')
}

// Listen for changes
prefersDark.addEventListener('change', (e) => {
  document.documentElement.classList.toggle('dark', e.matches)
})
```

## Persisting Preference

Save the user's preference in localStorage:

```typescript
type ColorMode = 'light' | 'dark' | 'system'

function setColorMode(mode: ColorMode) {
  localStorage.setItem('color-mode', mode)

  if (mode === 'system') {
    const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches
    document.documentElement.classList.toggle('dark', isDark)
  } else {
    document.documentElement.classList.toggle('dark', mode === 'dark')
  }
}

// Restore on page load
const saved = localStorage.getItem('color-mode') as ColorMode | null
if (saved) setColorMode(saved)
```

## Preventing Flash (FOUC)

Add an inline script in `<head>` to apply the theme before the page renders:

```html
<script>
  ;(function () {
    try {
      var mode = localStorage.getItem('color-mode')
      if (mode === 'dark' || (!mode && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark')
      }
    } catch (e) {}
  })()
</script>
```

This prevents the flash of wrong theme on page load.

## Using Dark Mode in Components

MeldUI components use Tailwind's `dark:` variant automatically. In your own components:

```vue
<template>
  <div class="bg-white dark:bg-gray-900">
    <p class="text-gray-900 dark:text-gray-100">This adapts to the current mode.</p>
  </div>
</template>
```

Or use the MeldUI theme variables which switch automatically:

```vue
<template>
  <div class="bg-background text-foreground">
    <!-- These CSS variables change in dark mode -->
  </div>
</template>
```
