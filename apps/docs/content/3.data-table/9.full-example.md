---
title: Full Example
description: Complete DataTable example with all features combined.
---

# Full Example

This page combines every DataTable feature into a single, comprehensive example: column helpers, cell renderers, sorting, filtering (advanced mode), row selection, bulk actions, column pinning, column resizing, keyboard navigation, footer aggregations, row expansion, loading/error states, and custom slots.

## Data Model

```ts
interface Employee {
  id: number
  name: string
  email: string
  department: 'engineering' | 'design' | 'marketing' | 'sales' | 'hr'
  title: string
  salary: number
  isActive: boolean
  joinDate: string
  performance: number
  notes: string
}
```

## Column Definitions

```ts
import { h } from 'vue'
import { createColumnHelper, cellRenderers, aggregations } from '@meldui/vue'
import { IconEdit, IconTrash, IconEye, IconMail } from '@meldui/tabler-vue'

const helper = createColumnHelper<Employee>()

const columns = [
  // Selection checkbox (pinned left by default)
  helper.selection(),

  // Expander column for row details
  helper.expander(),

  // ID column with count aggregation
  helper.accessor('id', {
    title: 'ID',
    size: 80,
    footer: aggregations.count({ format: '{count} employees' }),
  }),

  // Name column
  helper.accessor('name', {
    title: 'Name',
    size: 180,
  }),

  // Email column (not sortable)
  helper.accessor('email', {
    title: 'Email',
    enableSorting: false,
    cell: ({ getValue }) => {
      const email = getValue()
      return h(
        'a',
        {
          href: `mailto:${email}`,
          class: 'text-primary hover:underline',
        },
        email,
      )
    },
  }),

  // Department column with badge
  helper.accessor('department', {
    title: 'Department',
    cell: cellRenderers.badge({
      variantMap: {
        engineering: 'default',
        design: 'secondary',
        marketing: 'outline',
        sales: 'default',
        hr: 'secondary',
      },
      format: (value) => value.charAt(0).toUpperCase() + value.slice(1),
    }),
  }),

  // Title column
  helper.accessor('title', {
    title: 'Job Title',
    size: 200,
  }),

  // Salary column with currency formatting and sum footer
  helper.accessor('salary', {
    title: 'Salary',
    cell: cellRenderers.currency({ currency: 'USD' }),
    footer: aggregations.sum({ format: 'currency', currency: 'USD' }),
  }),

  // Active status with boolean badge
  helper.accessor('isActive', {
    title: 'Status',
    cell: cellRenderers.boolean({
      trueText: 'Active',
      falseText: 'Inactive',
      asBadge: true,
      trueVariant: 'default',
      falseVariant: 'secondary',
    }),
  }),

  // Join date with date formatting and min footer
  helper.accessor('joinDate', {
    title: 'Joined',
    cell: cellRenderers.date({ format: 'medium' }),
    footer: aggregations.min({
      format: 'date',
      prefix: 'Earliest: ',
    }),
  }),

  // Performance with number formatting and average footer
  helper.accessor('performance', {
    title: 'Performance',
    cell: cellRenderers.number({
      maximumFractionDigits: 1,
      compact: false,
    }),
    footer: aggregations.average({ decimals: 1, prefix: 'Avg: ' }),
  }),

  // Notes with truncation
  helper.accessor('notes', {
    title: 'Notes',
    enableSorting: false,
    enableHiding: true,
    cell: cellRenderers.truncate(40),
  }),

  // Actions column (pinned right by default)
  helper.actions({
    display: 'dropdown',
    actions: [
      {
        label: 'View Profile',
        icon: IconEye,
        onClick: (row) => viewProfile(row.original),
      },
      {
        label: 'Send Email',
        icon: IconMail,
        onClick: (row) => sendEmail(row.original.email),
      },
      {
        label: 'Edit',
        icon: IconEdit,
        onClick: (row) => editEmployee(row.original),
      },
      {
        label: 'Deactivate',
        icon: IconTrash,
        variant: 'destructive',
        onClick: (row) => deactivateEmployee(row.original),
        show: (row) => row.original.isActive,
      },
    ],
  }),
]
```

## Filter Fields (Advanced Mode)

```ts
import type { DataTableFilterField } from '@meldui/vue'

const filterFields: DataTableFilterField<Employee>[] = [
  {
    id: 'name',
    label: 'Name',
    type: 'text',
    placeholder: 'Filter by name...',
    availableOperators: ['contains', 'equals', 'startsWith', 'endsWith', 'isEmpty'],
  },
  {
    id: 'department',
    label: 'Department',
    type: 'select',
    options: [
      { label: 'Engineering', value: 'engineering' },
      { label: 'Design', value: 'design' },
      { label: 'Marketing', value: 'marketing' },
      { label: 'Sales', value: 'sales' },
      { label: 'HR', value: 'hr' },
    ],
    defaultOperator: 'isAnyOf',
  },
  {
    id: 'salary',
    label: 'Salary',
    type: 'number',
    min: 0,
    max: 500000,
    step: 5000,
    unit: 'USD',
    defaultOperator: 'greaterThan',
    availableOperators: ['equals', 'greaterThan', 'lessThan', 'between'],
  },
  {
    id: 'isActive',
    label: 'Active',
    type: 'boolean',
  },
  {
    id: 'joinDate',
    label: 'Joined',
    type: 'date',
    defaultOperator: 'isAfter',
  },
  {
    id: 'performance',
    label: 'Performance',
    type: 'number',
    min: 0,
    max: 100,
    step: 1,
    defaultOperator: 'between',
    availableOperators: ['equals', 'greaterThan', 'lessThan', 'between'],
  },
]
```

## Bulk Actions

```ts
import type { BulkActionOption } from '@meldui/vue'
import { IconDownload, IconTrash, IconMail, IconArchive } from '@meldui/tabler-vue'

const bulkActions: BulkActionOption<Employee>[] = [
  {
    label: 'Export to CSV',
    icon: IconDownload,
    action: (selectedRows) => {
      const csv = convertToCsv(selectedRows)
      downloadFile(csv, 'employees.csv')
    },
  },
  {
    label: 'Send Email',
    icon: IconMail,
    action: (selectedRows) => {
      const emails = selectedRows.map((row) => row.email)
      openEmailComposer(emails)
    },
  },
  {
    label: 'Archive',
    icon: IconArchive,
    action: (selectedRows) => {
      const ids = selectedRows.map((row) => row.id)
      archiveEmployees(ids)
    },
  },
  {
    label: 'Delete',
    icon: IconTrash,
    variant: 'destructive',
    action: (selectedRows) => {
      if (confirm(`Delete ${selectedRows.length} employees?`)) {
        const ids = selectedRows.map((row) => row.id)
        deleteEmployees(ids)
      }
    },
  },
]
```

## Complete Component

```vue
<script setup lang="ts">
import { ref } from 'vue'
import {
  DataTable,
  createColumnHelper,
  cellRenderers,
  aggregations,
  tableStateToServerParams,
  serverResponseToTableData,
} from '@meldui/vue'
import type {
  DataTableFilterField,
  BulkActionOption,
  ServerSideTableResponse,
} from '@meldui/vue'
import {
  IconEdit,
  IconTrash,
  IconEye,
  IconMail,
  IconDownload,
  IconArchive,
} from '@meldui/tabler-vue'
import { h } from 'vue'

// ── Data Model ──────────────────────────────────────────────

interface Employee {
  id: number
  name: string
  email: string
  department: 'engineering' | 'design' | 'marketing' | 'sales' | 'hr'
  title: string
  salary: number
  isActive: boolean
  joinDate: string
  performance: number
  notes: string
}

// ── Column Definitions ──────────────────────────────────────

const helper = createColumnHelper<Employee>()

const columns = [
  helper.selection(),
  helper.expander(),
  helper.accessor('id', {
    title: 'ID',
    size: 80,
    footer: aggregations.count({ format: '{count} employees' }),
  }),
  helper.accessor('name', { title: 'Name', size: 180 }),
  helper.accessor('email', {
    title: 'Email',
    enableSorting: false,
    cell: ({ getValue }) => {
      const email = getValue()
      return h('a', { href: `mailto:${email}`, class: 'text-primary hover:underline' }, email)
    },
  }),
  helper.accessor('department', {
    title: 'Department',
    cell: cellRenderers.badge({
      variantMap: {
        engineering: 'default',
        design: 'secondary',
        marketing: 'outline',
        sales: 'default',
        hr: 'secondary',
      },
    }),
  }),
  helper.accessor('title', { title: 'Job Title', size: 200 }),
  helper.accessor('salary', {
    title: 'Salary',
    cell: cellRenderers.currency({ currency: 'USD' }),
    footer: aggregations.sum({ format: 'currency', currency: 'USD' }),
  }),
  helper.accessor('isActive', {
    title: 'Status',
    cell: cellRenderers.boolean({
      trueText: 'Active',
      falseText: 'Inactive',
      asBadge: true,
    }),
  }),
  helper.accessor('joinDate', {
    title: 'Joined',
    cell: cellRenderers.date({ format: 'medium' }),
    footer: aggregations.min({ format: 'date', prefix: 'Earliest: ' }),
  }),
  helper.accessor('performance', {
    title: 'Performance',
    cell: cellRenderers.number({ maximumFractionDigits: 1 }),
    footer: aggregations.average({ decimals: 1, prefix: 'Avg: ' }),
  }),
  helper.accessor('notes', {
    title: 'Notes',
    enableSorting: false,
    cell: cellRenderers.truncate(40),
  }),
  helper.actions({
    display: 'dropdown',
    actions: [
      { label: 'View', icon: IconEye, onClick: (row) => viewProfile(row.original) },
      { label: 'Email', icon: IconMail, onClick: (row) => sendEmail(row.original.email) },
      { label: 'Edit', icon: IconEdit, onClick: (row) => editEmployee(row.original) },
      {
        label: 'Deactivate',
        icon: IconTrash,
        variant: 'destructive',
        onClick: (row) => deactivateEmployee(row.original),
        show: (row) => row.original.isActive,
      },
    ],
  }),
]

// ── Filter Fields (Advanced Mode) ───────────────────────────

const filterFields: DataTableFilterField<Employee>[] = [
  {
    id: 'name',
    label: 'Name',
    type: 'text',
    placeholder: 'Filter by name...',
    availableOperators: ['contains', 'equals', 'startsWith', 'endsWith', 'isEmpty'],
  },
  {
    id: 'department',
    label: 'Department',
    type: 'select',
    options: [
      { label: 'Engineering', value: 'engineering' },
      { label: 'Design', value: 'design' },
      { label: 'Marketing', value: 'marketing' },
      { label: 'Sales', value: 'sales' },
      { label: 'HR', value: 'hr' },
    ],
    defaultOperator: 'isAnyOf',
  },
  {
    id: 'salary',
    label: 'Salary',
    type: 'number',
    min: 0,
    max: 500000,
    step: 5000,
    unit: 'USD',
    defaultOperator: 'greaterThan',
    availableOperators: ['equals', 'greaterThan', 'lessThan', 'between'],
  },
  {
    id: 'isActive',
    label: 'Active',
    type: 'boolean',
  },
  {
    id: 'joinDate',
    label: 'Joined',
    type: 'date',
    defaultOperator: 'isAfter',
  },
  {
    id: 'performance',
    label: 'Performance',
    type: 'number',
    min: 0,
    max: 100,
    step: 1,
    defaultOperator: 'between',
    availableOperators: ['equals', 'greaterThan', 'lessThan', 'between'],
  },
]

// ── Bulk Actions ────────────────────────────────────────────

const bulkActions: BulkActionOption<Employee>[] = [
  {
    label: 'Export to CSV',
    icon: IconDownload,
    action: (rows) => exportCsv(rows),
  },
  {
    label: 'Send Email',
    icon: IconMail,
    action: (rows) => openEmailComposer(rows.map((r) => r.email)),
  },
  {
    label: 'Archive',
    icon: IconArchive,
    action: (rows) => archiveEmployees(rows.map((r) => r.id)),
  },
  {
    label: 'Delete',
    icon: IconTrash,
    variant: 'destructive',
    action: (rows) => {
      if (confirm(`Delete ${rows.length} employees?`)) {
        deleteEmployees(rows.map((r) => r.id))
      }
    },
  },
]

// ── State ───────────────────────────────────────────────────

const data = ref<Employee[]>([])
const pageCount = ref(0)
const loading = ref(false)
const error = ref<string | undefined>()
const tableRef = ref<InstanceType<typeof DataTable>>()

// ── Server Communication ────────────────────────────────────

async function handleServerSideChange({ sorting, filters, pagination }) {
  loading.value = true
  error.value = undefined

  try {
    const params = tableStateToServerParams(
      { sorting, filters, pagination },
      filterFields,
      'name'
    )

    const response = await fetch('/api/employees', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(params),
    })

    if (!response.ok) {
      throw new Error(`Server error: ${response.status}`)
    }

    const json: ServerSideTableResponse<Employee> = await response.json()
    const result = serverResponseToTableData(json)

    data.value = result.data
    pageCount.value = result.pageCount
  } catch (e) {
    error.value = e instanceof Error ? e.message : 'An unexpected error occurred'
  } finally {
    loading.value = false
  }
}

// ── Action Handlers ─────────────────────────────────────────

function viewProfile(employee: Employee) {
  // Navigate to profile page
}

function editEmployee(employee: Employee) {
  // Open edit dialog
}

function sendEmail(email: string) {
  window.open(`mailto:${email}`)
}

function deactivateEmployee(employee: Employee) {
  if (confirm(`Deactivate ${employee.name}?`)) {
    // Call API and refresh
    tableRef.value?.refresh()
  }
}

function exportCsv(rows: Employee[]) {
  // Generate and download CSV
}

function openEmailComposer(emails: string[]) {
  window.open(`mailto:${emails.join(',')}`)
}

function archiveEmployees(ids: number[]) {
  // Call API
}

function deleteEmployees(ids: number[]) {
  // Call API
}

function handleRetry() {
  tableRef.value?.refresh()
}
</script>

<template>
  <DataTable
    ref="tableRef"
    :columns="columns"
    :data="data"
    :page-count="pageCount"
    :on-server-side-change="handleServerSideChange"
    :loading="loading"
    :error="error"
    @retry="handleRetry"

    <!-- Filtering -->
    :filter-fields="filterFields"
    :advanced-mode="true"
    search-column="name"
    search-placeholder="Search employees..."

    <!-- Selection & Bulk Actions -->
    :enable-row-selection="true"
    :show-selected-count="true"
    :bulk-select-options="bulkActions"

    <!-- Column Pinning -->
    :enable-column-pinning="true"
    :default-pinning="{ left: ['select', 'name'], right: ['actions'] }"

    <!-- Column Resizing -->
    :enable-column-resizing="true"
    column-resize-mode="onChange"

    <!-- Column Hiding -->
    :enable-column-hiding="true"

    <!-- Row Expansion -->
    :enable-row-expansion="true"

    <!-- Keyboard Navigation -->
    :enable-keyboard-navigation="true"
    @row-activate="(row) => viewProfile(row.original)"

    <!-- Pagination -->
    :default-per-page="20"
    :page-size-options="[10, 20, 50, 100]"
    pagination-position="bottom"

    <!-- Appearance -->
    density="comfortable"
    max-height="700px"
    :bordered="false"
    :show-refresh-button="true"

    <!-- Row Styling -->
    :row-class="(row) => ({
      'opacity-50': !row.original.isActive,
    })"
  >
    <!-- Expanded row content -->
    <template #expanded-row="{ row }">
      <div class="grid grid-cols-3 gap-6 p-4">
        <div>
          <h4 class="text-sm font-medium text-muted-foreground mb-1">Full Notes</h4>
          <p class="text-sm">{{ row.original.notes || 'No notes available.' }}</p>
        </div>
        <div>
          <h4 class="text-sm font-medium text-muted-foreground mb-1">Contact</h4>
          <p class="text-sm">{{ row.original.email }}</p>
        </div>
        <div>
          <h4 class="text-sm font-medium text-muted-foreground mb-1">Performance Score</h4>
          <div class="flex items-center gap-2">
            <div class="h-2 w-24 bg-muted rounded-full overflow-hidden">
              <div
                class="h-full bg-primary rounded-full"
                :style="{ width: `${row.original.performance}%` }"
              />
            </div>
            <span class="text-sm">{{ row.original.performance }}%</span>
          </div>
        </div>
      </div>
    </template>

    <!-- Custom toolbar additions -->
    <template #toolbar-end="{ table }">
      <button
        class="text-sm text-muted-foreground hover:text-foreground"
        @click="tableRef?.resetAll()"
      >
        Reset All
      </button>
    </template>
  </DataTable>
</template>
```

## Features Used in This Example

| Feature                 | Props / Configuration                                                                       |
| ----------------------- | ------------------------------------------------------------------------------------------- |
| **Column helpers**      | `createColumnHelper<Employee>()` with accessor, selection, expander, actions                |
| **Cell renderers**      | `cellRenderers.badge()`, `.currency()`, `.boolean()`, `.date()`, `.number()`, `.truncate()` |
| **Footer aggregations** | `aggregations.count()`, `.sum()`, `.min()`, `.average()`                                    |
| **Advanced filters**    | `advancedMode: true` with 6 filter fields using operators                                   |
| **Search**              | `searchColumn="name"` with debounced text input                                             |
| **Row selection**       | `enableRowSelection: true` with selection column                                            |
| **Bulk actions**        | 4 bulk actions (export, email, archive, delete)                                             |
| **Column pinning**      | Select + Name pinned left, Actions pinned right                                             |
| **Column resizing**     | Drag-to-resize headers                                                                      |
| **Column hiding**       | View options dropdown                                                                       |
| **Row expansion**       | Expander column with `#expanded-row` slot                                                   |
| **Keyboard navigation** | Arrow keys, Space to select, Enter to activate                                              |
| **Loading state**       | Skeleton rows during fetch                                                                  |
| **Error state**         | Alert with retry button                                                                     |
| **Row styling**         | Inactive employees dimmed with opacity                                                      |
| **Density**             | Comfortable (default)                                                                       |
| **Refresh button**      | Manual data refresh                                                                         |
| **Custom slots**        | `#expanded-row`, `#toolbar-end`                                                             |

## Server API Contract

This example expects your server to accept POST requests with this body:

```json
{
  "page": 1,
  "per_page": 20,
  "sort_by": "salary",
  "sort_order": "desc",
  "filters": {
    "name": "john",
    "department": [{ "operator": "isAnyOf", "value": ["engineering", "design"] }],
    "salary": [{ "operator": "greaterThan", "value": 50000 }],
    "isActive": [{ "operator": "is", "value": true }],
    "joinDate": [{ "operator": "isAfter", "value": "2023-01-01" }],
    "performance": [{ "operator": "between", "value": [70, 100] }]
  }
}
```

And respond with:

```json
{
  "data": [
    {
      "id": 1,
      "name": "Alice Johnson",
      "email": "alice@example.com",
      "department": "engineering",
      "title": "Senior Engineer",
      "salary": 145000,
      "isActive": true,
      "joinDate": "2020-03-15",
      "performance": 92,
      "notes": "Top performer in the engineering team..."
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 247,
    "total_pages": 13
  }
}
```
