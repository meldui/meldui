---
title: Basic Usage
description: Get started with DataTable using simple column definitions and data.
---

# Basic Usage

This page walks through the fundamental setup for a DataTable: defining your data type, creating columns, managing server-side state, and rendering the table.

## Prerequisites

Make sure you have `@meldui/vue` installed in your project:

```bash
pnpm add @meldui/vue
```

The DataTable requires `@tanstack/vue-table` as a peer dependency. It is included transitively through `@meldui/vue`, but you may also install it directly if you need to import TanStack types:

```bash
pnpm add @tanstack/vue-table
```

## Step 1: Define Your Data Type

Start by creating a TypeScript interface that represents a single row of data:

```ts
interface Employee {
  id: number
  name: string
  email: string
  department: string
  salary: number
  joinDate: string
}
```

## Step 2: Create Column Definitions

Use `createColumnHelper` to get a typed helper, then define your columns:

```ts
import { createColumnHelper } from '@meldui/vue'

const helper = createColumnHelper<Employee>()

const columns = [
  helper.accessor('name', { title: 'Name' }),
  helper.accessor('email', { title: 'Email' }),
  helper.accessor('department', { title: 'Department' }),
  helper.accessor('salary', { title: 'Salary' }),
  helper.accessor('joinDate', { title: 'Join Date' }),
]
```

The `accessor` method maps a column to a key on your data type. The `title` option sets the text displayed in the column header. By default, all accessor columns are sortable and hideable.

## Step 3: Set Up Server-Side State

The DataTable is server-side only. You need to:

1. Provide a `data` array (the current page of results)
2. Provide a `pageCount` (total number of pages)
3. Provide an `onServerSideChange` callback that fetches data when table state changes

```vue
<script setup lang="ts">
import { ref } from 'vue'
import {
  DataTable,
  createColumnHelper,
  tableStateToServerParams,
  serverResponseToTableData,
} from '@meldui/vue'
import type { ServerSideTableResponse } from '@meldui/vue'

interface Employee {
  id: number
  name: string
  email: string
  department: string
  salary: number
  joinDate: string
}

const helper = createColumnHelper<Employee>()

const columns = [
  helper.accessor('name', { title: 'Name' }),
  helper.accessor('email', { title: 'Email' }),
  helper.accessor('department', { title: 'Department' }),
  helper.accessor('salary', { title: 'Salary' }),
  helper.accessor('joinDate', { title: 'Join Date' }),
]

const data = ref<Employee[]>([])
const pageCount = ref(0)
const loading = ref(false)
const error = ref<string | undefined>()

async function handleServerSideChange({ sorting, filters, pagination }) {
  loading.value = true
  error.value = undefined

  try {
    const params = tableStateToServerParams({ sorting, filters, pagination })
    const response = await fetch('/api/employees', {
      method: 'POST',
      body: JSON.stringify(params),
    })
    const json: ServerSideTableResponse<Employee> = await response.json()
    const result = serverResponseToTableData(json)

    data.value = result.data
    pageCount.value = result.pageCount
  } catch (e) {
    error.value = e instanceof Error ? e.message : 'Failed to load data'
  } finally {
    loading.value = false
  }
}
</script>

<template>
  <DataTable
    :columns="columns"
    :data="data"
    :page-count="pageCount"
    :on-server-side-change="handleServerSideChange"
    :loading="loading"
    :error="error"
  />
</template>
```

## The `tableStateToServerParams` Helper

This utility converts TanStack table state into a flat server-friendly format:

```ts
import { tableStateToServerParams } from '@meldui/vue'

const params = tableStateToServerParams({
  sorting: [{ id: 'name', desc: false }],
  filters: [{ id: 'department', value: 'Engineering' }],
  pagination: { pageIndex: 0, pageSize: 10 },
})

// Result:
// {
//   page: 1,              // 1-based (converted from 0-based pageIndex)
//   per_page: 10,
//   sort_by: 'name',
//   sort_order: 'asc',
//   filters: { department: 'Engineering' }
// }
```

## The `serverResponseToTableData` Helper

This utility converts a standard paginated API response into the format the DataTable expects:

```ts
import { serverResponseToTableData } from '@meldui/vue'

// Your API returns this shape:
const apiResponse = {
  data: [{ id: 1, name: 'Alice' /* ... */ }],
  meta: {
    current_page: 1,
    per_page: 10,
    total: 100,
    total_pages: 10,
  },
}

const { data, pageCount } = serverResponseToTableData(apiResponse)
// data = [...rows]
// pageCount = 10
```

## DataTable Props Reference

These are the core props for basic usage. Additional props for advanced features are documented in their respective pages.

| Prop                   | Type                                       | Default                | Description                                                  |
| ---------------------- | ------------------------------------------ | ---------------------- | ------------------------------------------------------------ |
| `columns`              | `ColumnDef<TData>[]`                       | required               | Column definitions created via `createColumnHelper`          |
| `data`                 | `TData[]`                                  | required               | The current page of data to display                          |
| `pageCount`            | `number`                                   | required               | Total number of pages (from your server response)            |
| `onServerSideChange`   | `Function`                                 | required               | Callback invoked when sorting, filters, or pagination change |
| `loading`              | `boolean`                                  | `false`                | Shows skeleton loading rows                                  |
| `loadingMessage`       | `string`                                   | `'Loading data...'`    | Message shown during loading state                           |
| `error`                | `string \| Error`                          | `undefined`            | Shows an error alert with retry button                       |
| `emptyMessage`         | `string`                                   | `'No results found.'`  | Message shown when data array is empty                       |
| `showToolbar`          | `boolean`                                  | `true`                 | Show/hide the toolbar area                                   |
| `showPagination`       | `boolean`                                  | `true`                 | Show/hide pagination controls                                |
| `defaultPerPage`       | `number`                                   | `10`                   | Initial page size                                            |
| `pageSizeOptions`      | `number[]`                                 | `[10, 20, 30, 40, 50]` | Available page size options                                  |
| `showPageSizeSelector` | `boolean`                                  | `true`                 | Show the page size dropdown                                  |
| `showPageInfo`         | `boolean`                                  | `true`                 | Show "Page X of Y" info                                      |
| `paginationPosition`   | `'bottom' \| 'top' \| 'both'`              | `'bottom'`             | Where to place pagination controls                           |
| `maxHeight`            | `string`                                   | `'600px'`              | Maximum height of the table container (enables scrolling)    |
| `density`              | `'compact' \| 'comfortable' \| 'spacious'` | `'comfortable'`        | Row density / padding                                        |
| `bordered`             | `boolean`                                  | `false`                | Show cell borders (spreadsheet-like)                         |

## Events

| Event         | Payload      | Description                                                      |
| ------------- | ------------ | ---------------------------------------------------------------- |
| `retry`       | none         | Emitted when the user clicks the retry button in the error state |
| `rowActivate` | `Row<TData>` | Emitted when a row is activated via keyboard (Enter key)         |

## Initial State

You can restore table state (for example, from URL query parameters) using the initial state props:

```vue
<DataTable
  :columns="columns"
  :data="data"
  :page-count="pageCount"
  :on-server-side-change="handleServerSideChange"
  :initial-sorting="[{ id: 'name', desc: false }]"
  :initial-filters="[{ id: 'department', value: ['Engineering'] }]"
  :initial-pagination="{ pageIndex: 2, pageSize: 20 }"
/>
```

| Prop                | Type                       | Description                       |
| ------------------- | -------------------------- | --------------------------------- |
| `initialSorting`    | `SortingState`             | Restore sorting state on mount    |
| `initialFilters`    | `ColumnFiltersState`       | Restore filter state on mount     |
| `initialPagination` | `Partial<PaginationState>` | Restore pagination state on mount |

Note that reset methods (exposed via `defineExpose`) reset to true defaults (empty state), not back to initial values.

## Exposed Methods

The DataTable exposes its internal state and helper methods via `defineExpose`. Access them with a template ref:

```vue
<script setup lang="ts">
import { ref } from 'vue'
import { DataTable } from '@meldui/vue'

const tableRef = ref<InstanceType<typeof DataTable>>()

function resetEverything() {
  tableRef.value?.resetAll()
}
</script>

<template>
  <DataTable ref="tableRef" :columns="columns" :data="data" ... />
  <button @click="resetEverything">Reset</button>
</template>
```

| Method / Property   | Type                      | Description                                               |
| ------------------- | ------------------------- | --------------------------------------------------------- |
| `table`             | `Table<TData>`            | The underlying TanStack Table instance                    |
| `sorting`           | `Ref<SortingState>`       | Current sorting state                                     |
| `columnFilters`     | `Ref<ColumnFiltersState>` | Current filter state                                      |
| `pagination`        | `Ref<PaginationState>`    | Current pagination state                                  |
| `rowSelection`      | `Ref<RowSelectionState>`  | Current row selection state                               |
| `selectedRows`      | `ComputedRef<TData[]>`    | Array of selected row data                                |
| `selectedRowCount`  | `ComputedRef<number>`     | Number of selected rows                                   |
| `isFiltered`        | `ComputedRef<boolean>`    | Whether any filters are active                            |
| `hasSelection`      | `ComputedRef<boolean>`    | Whether any rows are selected                             |
| `resetAll()`        | `() => void`              | Reset all state (filters, sorting, selection, pagination) |
| `resetFilters()`    | `() => void`              | Clear all filters                                         |
| `resetSorting()`    | `() => void`              | Clear sorting                                             |
| `resetSelection()`  | `() => void`              | Clear row selection                                       |
| `resetPagination()` | `() => void`              | Reset to first page and default page size                 |
| `refresh()`         | `() => void`              | Re-trigger `onServerSideChange` with current state        |
