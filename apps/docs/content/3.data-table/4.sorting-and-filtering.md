---
title: Sorting & Filtering
description: Add client-side and server-side sorting and filtering to your DataTable.
---

# Sorting & Filtering

The DataTable supports column sorting and a rich filter system. Both are server-side operations -- the DataTable emits state changes, and your server handles the actual sorting and filtering logic.

## Sorting

### Enabling Sorting

Sorting is enabled per column by default. When a user clicks a sortable column header, the DataTable cycles through ascending, descending, and unsorted states.

```ts
const helper = createColumnHelper<Employee>()

const columns = [
  // Sortable (default)
  helper.accessor('name', { title: 'Name' }),

  // Explicitly disable sorting
  helper.accessor('avatar', { title: 'Avatar', enableSorting: false }),

  // Still sortable (enableSorting defaults to true)
  helper.accessor('salary', { title: 'Salary' }),
]
```

### Sort State

Sort state is communicated to your server through the `onServerSideChange` callback:

```ts
function handleServerSideChange({ sorting, filters, pagination }) {
  // sorting is an array of { id: string, desc: boolean }
  // Example: [{ id: 'name', desc: false }]

  const params = tableStateToServerParams({ sorting, filters, pagination })
  // params.sort_by = 'name'
  // params.sort_order = 'asc'
}
```

Only single-column sorting is supported. The most recently toggled column becomes the active sort.

### Initial Sorting

To load the table with a pre-applied sort (for example, from URL state):

```vue
<DataTable
  :columns="columns"
  :data="data"
  :page-count="pageCount"
  :on-server-side-change="handleServerSideChange"
  :initial-sorting="[{ id: 'name', desc: false }]"
/>
```

## Filtering

The DataTable provides a filter system with a command palette UI for adding filters, filter chips that display active filters, and type-specific filter components.

### Filter Modes

There are two filter modes:

| Mode                 | Prop                  | Description                                                                                                 |
| -------------------- | --------------------- | ----------------------------------------------------------------------------------------------------------- |
| **Simple** (default) | `advancedMode: false` | Each filter uses its natural UI (text input, select dropdown, date picker, etc.) without operator selection |
| **Advanced**         | `advancedMode: true`  | Each filter includes an operator dropdown (contains, equals, greater than, etc.) allowing precise control   |

The mode is set once at initialization and cannot be changed at runtime.

### Defining Filter Fields

Filter fields are defined separately from columns using the `filterFields` prop:

```ts
import type { DataTableFilterField } from '@meldui/vue'

const filterFields: DataTableFilterField<Employee>[] = [
  {
    id: 'name',
    label: 'Name',
    type: 'text',
    placeholder: 'Filter by name...',
  },
  {
    id: 'department',
    label: 'Department',
    type: 'select',
    options: [
      { label: 'Engineering', value: 'engineering' },
      { label: 'Design', value: 'design' },
      { label: 'Marketing', value: 'marketing' },
      { label: 'Sales', value: 'sales' },
    ],
  },
  {
    id: 'salary',
    label: 'Salary',
    type: 'number',
    min: 0,
    max: 500000,
    step: 1000,
    unit: 'USD',
  },
  {
    id: 'isActive',
    label: 'Active',
    type: 'boolean',
  },
]
```

Then pass them to the DataTable:

```vue
<DataTable
  :columns="columns"
  :data="data"
  :page-count="pageCount"
  :on-server-side-change="handleServerSideChange"
  :filter-fields="filterFields"
/>
```

### Filter Types (Simple Mode)

There are 8 built-in filter types. In simple mode, all 8 are available:

| Type          | UI Component            | Value Format                             | Multi-Instance |
| ------------- | ----------------------- | ---------------------------------------- | -------------- |
| `text`        | Text input              | `string[]`                               | Yes            |
| `number`      | Number input            | `number[]`                               | Yes            |
| `date`        | Date picker             | `DateValue[]`                            | Yes            |
| `select`      | Single-select dropdown  | `string`                                 | No             |
| `boolean`     | Toggle button           | `boolean`                                | No             |
| `multiselect` | Multi-select checkboxes | `string[]`                               | No             |
| `range`       | Dual-thumb range slider | `[number, number][]`                     | Yes            |
| `daterange`   | Date range picker       | `{ start: DateValue, end: DateValue }[]` | Yes            |

**Multi-instance** means the user can add the same filter field multiple times (e.g., two separate "name" text filters for "contains John" and "contains Doe").

### Filter Field Configuration

The `DataTableFilterField` interface supports these properties:

| Property             | Type                   | Description                                                |
| -------------------- | ---------------------- | ---------------------------------------------------------- |
| `id`                 | `keyof TData`          | The column/field identifier (must match a column key)      |
| `label`              | `string`               | Display label shown in the filter chip and command palette |
| `type`               | `FilterType \| string` | Built-in type or custom plugin type string                 |
| `placeholder`        | `string`               | Placeholder text for the filter input                      |
| `icon`               | `Component`            | Optional icon displayed in the filter chip                 |
| `options`            | `FilterOption[]`       | Options array for `select` and `multiselect` types         |
| `min`                | `number`               | Minimum value for `number` type                            |
| `max`                | `number`               | Maximum value for `number` type                            |
| `step`               | `number`               | Step increment for `number` and `range` types              |
| `unit`               | `string`               | Unit label for `number` type (e.g., "USD", "kg")           |
| `range`              | `[number, number]`     | Min/max bounds for `range` type slider                     |
| `defaultOperator`    | `FilterOperator`       | Override the default operator in advanced mode             |
| `availableOperators` | `FilterOperator[]`     | Restrict which operators are shown in advanced mode        |

### Filter Options

For `select` and `multiselect` filters, define options as an array:

```ts
interface FilterOption {
  label: string // Display text
  value: string // Value sent to the server
  icon?: Component // Optional icon
}
```

Example:

```ts
{
  id: 'status',
  label: 'Status',
  type: 'multiselect',
  options: [
    { label: 'Active', value: 'active', icon: IconCheck },
    { label: 'Inactive', value: 'inactive', icon: IconX },
    { label: 'Pending', value: 'pending', icon: IconClock },
  ],
}
```

### Search Column

The DataTable supports a special search input that filters a single column with a debounced text search:

```vue
<DataTable
  :columns="columns"
  :data="data"
  :page-count="pageCount"
  :on-server-side-change="handleServerSideChange"
  search-column="name"
  search-placeholder="Search employees..."
/>
```

The search input is displayed in the toolbar and uses 300ms debouncing. Its value is sent as a plain string in the filter state, separate from the filter chips.

When using `tableStateToServerParams`, pass the `searchColumn` name so it is kept as a string (not wrapped in an array):

```ts
const params = tableStateToServerParams(
  { sorting, filters, pagination },
  filterFields,
  'name', // search column name
)
```

### Filter State in Server Params

The `tableStateToServerParams` utility transforms filter values based on their type:

```ts
// Simple mode output examples:
{
  filters: {
    name: ['john', 'jane'],         // text: array of strings
    age: [25, 30],                  // number: array of numbers
    role: 'admin',                  // select: single string
    isActive: true,                 // boolean: single boolean
    status: ['active', 'inactive'], // multiselect: array of strings
    salary: [{ start: 30000, end: 150000 }], // range: array of objects
    createdAt: [{ start, end }],    // daterange: array of objects
  }
}
```

### Restoring Filters from URL

To restore filters on page load (e.g., from URL query parameters):

```vue
<DataTable
  :columns="columns"
  :data="data"
  :page-count="pageCount"
  :on-server-side-change="handleServerSideChange"
  :filter-fields="filterFields"
  :initial-filters="[
    { id: 'department', value: 'engineering' },
    { id: 'isActive', value: true },
  ]"
/>
```

The toolbar will reconstruct filter chip instances from the initial filter state on mount.

## Complete Sorting & Filtering Example

```vue
<script setup lang="ts">
import { ref } from 'vue'
import {
  DataTable,
  createColumnHelper,
  cellRenderers,
  tableStateToServerParams,
  serverResponseToTableData,
} from '@meldui/vue'
import type { DataTableFilterField } from '@meldui/vue'

interface Employee {
  id: number
  name: string
  email: string
  department: string
  salary: number
  isActive: boolean
  joinDate: string
}

const helper = createColumnHelper<Employee>()

const columns = [
  helper.accessor('name', { title: 'Name' }),
  helper.accessor('email', { title: 'Email', enableSorting: false }),
  helper.accessor('department', { title: 'Department' }),
  helper.accessor('salary', {
    title: 'Salary',
    cell: cellRenderers.currency({ currency: 'USD' }),
  }),
  helper.accessor('isActive', {
    title: 'Active',
    cell: cellRenderers.boolean({ asBadge: true }),
  }),
  helper.accessor('joinDate', {
    title: 'Joined',
    cell: cellRenderers.date({ format: 'medium' }),
  }),
]

const filterFields: DataTableFilterField<Employee>[] = [
  { id: 'name', label: 'Name', type: 'text', placeholder: 'Filter by name...' },
  {
    id: 'department',
    label: 'Department',
    type: 'select',
    options: [
      { label: 'Engineering', value: 'engineering' },
      { label: 'Design', value: 'design' },
      { label: 'Marketing', value: 'marketing' },
    ],
  },
  {
    id: 'salary',
    label: 'Salary',
    type: 'range',
    range: [0, 300000],
    step: 5000,
    unit: 'USD',
  },
  { id: 'isActive', label: 'Active', type: 'boolean' },
  { id: 'joinDate', label: 'Joined', type: 'date' },
]

const data = ref<Employee[]>([])
const pageCount = ref(0)
const loading = ref(false)

async function handleServerSideChange({ sorting, filters, pagination }) {
  loading.value = true
  try {
    const params = tableStateToServerParams({ sorting, filters, pagination }, filterFields, 'name')
    const response = await fetch('/api/employees', {
      method: 'POST',
      body: JSON.stringify(params),
    })
    const json = await response.json()
    const result = serverResponseToTableData(json)
    data.value = result.data
    pageCount.value = result.pageCount
  } finally {
    loading.value = false
  }
}
</script>

<template>
  <DataTable
    :columns="columns"
    :data="data"
    :page-count="pageCount"
    :on-server-side-change="handleServerSideChange"
    :filter-fields="filterFields"
    :loading="loading"
    search-column="name"
    search-placeholder="Search employees..."
  />
</template>
```
